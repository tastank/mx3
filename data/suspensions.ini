[HEADER]
VERSION=4

[BASIC]
WHEELBASE=2.455
CG_LOCATION=0.64                            ; Front Weight distribution in percentage

[ARB]
; Antiroll bar stiffness front/rear, in N/m
FRONT=3170
REAR=9340 ; this seems way too high but it's what I measured

; TODO most of these measurements assume one element runs along one of the principal planes (e.g. control arms are all in the horizontal plane) when the car is loaded. Take some more sophisticated measurements.
[FRONT]
TYPE=STRUT
; Distance of center of wheel from the CG in meters. Front Wheel Radius-BASEY=front CG. Actual CG height =(FWR+FBasey)+(RWR+Rbasey))/CG_LOCATION%
BASEY=-0.220
TRACK=1.500 ; TODO this looks visually about right, but measure it.
; Positive raises ride height, negative lowers ride height. ; TODO do this right? not sure how exactly it's supposed to work.
ROD_LENGTH=0.08
HUB_MASS=35                                 ; Front sprung mass
RIM_OFFSET=0.0
; TODO measure all of these points with a 3D scanner.
STRUT_CAR=0.125,0.515,-0.035
STRUT_TYRE=0.085,-0.115,0
WBCAR_BOTTOM_FRONT=0.385,-0.115,0
WBCAR_BOTTOM_REAR=0.385,-0.115,-0.36
WBTYRE_BOTTOM=0.085,-0.115,0.0
WBCAR_STEER=0.506,0,-0.14
WBTYRE_STEER=0.091,0,-0.130
TOE_OUT=0.00010                             ; Toe-out expressed as the length of the steering arm in meters        ;Final
STATIC_CAMBER=-0.1                          ; Static Camber in degrees. Actual camber relative to suspension geometry and movement, check values in game    ;Adjust to this value
; https://www.omnicalculator.com/physics/spring-rate suggests a spring rate between 18517 and 31465 N/m given the spring details in the manual (12.5mm wire diameter, 147-173 coil OD, 2.87 coils); using the midpoint with a 0.9 MR gives 20,243 N/m at the wheel
; I took some measurements of the actual springs as well, and used those in the same calculator and got a slightly lower rate.
; I measured using a bathroom scale and a ruler and the front springs appear to be around 31000N/m
SPRING_RATE=31000                           ; Do not use spring value but calculate wheel rate (see above)
; This should probably be used given the front coil's variable diameter, but I've no idea how to work out what it should be
PROGRESSIVE_SPRING_RATE=0                   ; progressive spring rate in N/m/m
; TODO Set bumpstop/packer values
; shock length beyond the bump stop is 96mm; bump stop height is 74mm (total travel is 170mm)
; If I understand this right, PACKER_RANGE should be 96mm and BUMPSTOP_UP + BUMPSTOP_DN should be 170mm, all values divided by MR (0.72)
; Thus total travel should be 236mm
;      PACKER_RANGE should be 133mm
BUMP_STOP_RATE=40000                        ; bump stop spring rate
BUMPSTOP_UP=0.143                           ; meters to upper bumpstop from the 0 design of the suspension
BUMPSTOP_DN=0.093                           ; meters to bottom bumpstop from the 0 design of the suspension
PACKER_RANGE=0.133                           ; Total suspension movement range, before hitting packers

; this comes from the values in the shop manual, with a motion ratio of 0.72
DAMP_BUMP=1170                              ; Damper wheel rate stiffness in N sec/m in slow speed compression
DAMP_FAST_BUMP=460                         ; Damper wheel rate stiffness in N sec/m in fast speed compression
DAMP_BUMP=0                              ; Damper wheel rate stiffness in N sec/m in slow speed compression
DAMP_FAST_BUMP=0                         ; Damper wheel rate stiffness in N sec/m in fast speed compression
DAMP_FAST_BUMPTHRESHOLD=0.150               ; Damper bump slow/fast threshold in seconds
DAMP_REBOUND=3050                           ; Damper wheel rate stiffness in N sec/m in slow speed rebound
DAMP_FAST_REBOUND=1070                       ; Damper wheel rate stiffness in N sec/m in fast speed rebound
DAMP_FAST_REBOUNDTHRESHOLD=0.080            ; Damper rebound slow/fast threshold in seconds


[REAR]
TYPE=STRUT

; TODO measure all of these points with a 3D scanner
STRUT_CAR=0.178,0.55,-0.065
STRUT_TYRE=0.03,-0.07,0
WBCAR_BOTTOM_FRONT=0.1,-0.07,0.585
WBCAR_BOTTOM_REAR=0.456,-0.07,0.1
WBTYRE_BOTTOM=0.03,-0.07,0.085
WBCAR_STEER=0.456,-0.07,-0.1
WBTYRE_STEER=0.03,-0.07,-0.085
TOE_OUT=-0.00010                             ; Toe-out expressed as the length of the steering arm in meters        ;Final
STATIC_CAMBER=-0.1                          ; Static Camber in degrees. Actual camber relative to suspension geometry and movement, check values in game    ;Adjust to this value

RIM_OFFSET=0.0
BASEY=-0.22 ; TODO Rough guess, but I'm not sure I can measure it
TRACK=1.480 ; TODO measure this
ROD_LENGTH=0.11 ; TODO I thought I understood this but I still don't
HUB_MASS=31 ; TODO measure this

TOE_OUT=0.010                               ; Toe-out expressed as the length of the steering arm in meters        ;Final
STATIC_CAMBER=-0.1                          ; Static Camber in degrees. Actual camber relative to suspension geometry and movement, check values in game    ;Adjust to this value
; https://www.omnicalculator.com/physics/spring-rate suggests a spring rate of 9668 N/m given the spring details in the manual (10.6mm wire diameter, 140mm coil OD, 5.65 coils); with a 0.9 MR that gives 7831 N/m at the wheel; this seems impossibly soft.
; I measured with a bathroom scale and a ruler and found the wheel rate to be pretty close to 15000N/m
SPRING_RATE=15000
PROGRESSIVE_SPRING_RATE=0                   ; progressive spring rate in N/m/m

; TODO set bump stop/packer values
; 230mm total shock travel, 50mm bumpstop (but it's broken so I don't know how big it should be)
; If I understand correctly, this means PACKER_RANGE should be 230mm-50mm, and BUMPSTOP_UP + BUMPSTOP_DN should be 230mm, all divided by the MR (0.85)
; Thus total range is 270mm
;      PACKER_RANGE is 210
BUMP_STOP_RATE=40000 ; bump stop spring rate
BUMPSTOP_UP=0.170 ; meters to upper bumpstop from the 0 design of the suspension
BUMPSTOP_DN=0.100 ; meters to bottom bumpstop from the 0 design of the suspension
PACKER_RANGE=0.210 ; Total suspension movement range, before hitting packers

; this comes from the values in the manual, with a motion raio of 0.85
DAMP_BUMP=1205                                ; Damper wheel rate stiffness in N sec/m in slow speed compression
DAMP_FAST_BUMP=475                            ; Damper wheel rate stiffness in N sec/m in fast speed compression
DAMP_FAST_BUMPTHRESHOLD=0.115                ; Damper bump slow/fast threshold in m/s
DAMP_REBOUND=2830                            ; Damper wheel rate stiffness in N sec/m in slow speed rebound
DAMP_FAST_REBOUND=990                        ; Damper wheel rate stiffness in N sec/m in fast speed rebound
DAMP_FAST_REBOUNDTHRESHOLD=0.1


[GRAPHICS_OFFSETS]
WHEEL_LF=-0.0                                ; Left front graphical offset of the wheel positioning in the x axis (width). + is left - is right movement
SUSP_LF=-0.0                                ; Left front graphical offset of the suspension positioning in the x axis (width). + is left - is right movement
WHEEL_RF=0.0                                ; Right front as above
SUSP_RF=0.0                                    ; Right front as above
WHEEL_LR=-0.0                                ; Left rear as above
SUSP_LR=-0.0                                ; Left rear as above
WHEEL_RR=0.0                                ; Right rear as above
SUSP_RR=0.0                                    ; Right rear as above

[DAMAGE]
MIN_VELOCITY=30                                ; MINUMUM VELOCITY TO START TAKING DAMAGE
GAIN=0.0006                                    ; AMOUNT OF STEER ROD DEFLECTION FOR IMPACT KMH
MAX_DAMAGE=0.05                                ; MAXIMUM AMOUNT OF STEER ROD DEFLECTION ALLOWED
DEBUG_LOG=1                                    ; ACTIVATES DAMAGE DEBUG IN THE LOG
