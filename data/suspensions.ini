[HEADER]
VERSION=4

[BASIC]
WHEELBASE=2.455
CG_LOCATION=0.64                            ; Front Weight distribution in percentage

[ARB]
FRONT=17500                                 ; Front antiroll bar stiffness. in Nm. TODO no idea what the real value is
REAR=12000                                  ; Rear antiroll bar stiffness. in Nm. TODO no idea what the real value is

; TODO most of these measurements assume one element runs along one of the principal planes (e.g. control arms are all in the horizontal plane) when the car is loaded. Take some more sophisticated measurements.
[FRONT]
TYPE=STRUT
BASEY=-0.150                                  ; Distance of center of wheel from the CG in meters. Front Wheel Radius-BASEY=front CG. Actual CG height =(FWR+FBasey)+(RWR+Rbasey))/CG_LOCATION%; TODO using this to set ride height, not CG as intended. Figure out what's up. I think this should be about +0.15m
TRACK=1.500 ; TODO this looks visually about right, but measure it.
ROD_LENGTH=0.11                              ; Positive raises ride height, negative lowers ride height. ; TODO do this right? not sure how exactly it's supposed to work.
HUB_MASS=35                                 ; Front sprung mass
RIM_OFFSET=0.0
STRUT_CAR=0.125,0.415,-0.05                     ; TODO measured this unloaded, then shortened it to look right in the visualizer. Measure it with suspension loaded. The Z position is eyeballed; measure that with a plumb bob.
STRUT_TYRE=0.085,-0.115,0.00125             ; TODO I forgot to take this X measurement, so this was just adjusted until it sorta looked right in the visualizer
WBCAR_BOTTOM_FRONT=0.385,-0.115,0           ; Bottom front car side wishbone attach point ; TODO X dimension is measured from brake rotor, not hub. Add offset for that
WBCAR_BOTTOM_REAR=0.385,-0.115,-0.36        ; Bottom rear car side wishbone attach point        ; Top tyre side wishbone attach point
WBTYRE_BOTTOM=0.085,-0.115,0.00125          ; Bottom tyre side wishbone attach point
WBCAR_STEER=0.506,0,-0.14                   ; Steering rod car side attach point ; TODO this is measured by tie rod length (415mm) + wheel end offset, so it will have to be updated if the tire end offset is changed
WBTYRE_STEER=0.091,0,-0.130                 ; Steering rod tyre side attach point ; TODO again X is measured from rotor
TOE_OUT=0.00010                             ; Toe-out expressed as the length of the steering arm in meters        ;Final
STATIC_CAMBER=-0.1                          ; Static Camber in degrees. Actual camber relative to suspension geometry and movement, check values in game    ;Adjust to this value
; 175mm X dimension rotor to spring (at rotor top), 385mm rotor to WB pivot. Ball joint was not measured but guesstimate 85mm. MR estimated at (385-85)/385 = 0.779
; Guessing front factory spring rate 150lb/in; Wheel rate = MR^2*spring rate = .779*.779*150 = 91lb/in = 405N/in = 15949N/m
; After all that, it seems to soft in-game, so I went with 25000.
SPRING_RATE=25000                           ; Do not use spring value but calculate wheel rate (see above)
PROGRESSIVE_SPRING_RATE=0                   ; progressive spring rate in N/m/m
; TODO everything below this line has not been set properly
BUMP_STOP_RATE=40000                        ; bump stop spring rate
BUMPSTOP_UP=0.075                           ; meters to upper bumpstop from the 0 design of the suspension                
BUMPSTOP_DN=0.093                           ; meters to bottom bumpstop from the 0 design of the suspension
PACKER_RANGE=0.175                          ; Total suspension movement range, before hitting packers            
DAMP_BUMP=1320                              ; Damper wheel rate stiffness in N sec/m in slow speed compression
DAMP_FAST_BUMP=980                          ; Damper wheel rate stiffness in N sec/m in fast speed compression
DAMP_FAST_BUMPTHRESHOLD=0.080               ; Damper bump slow/fast threshold in seconds                    
DAMP_REBOUND=5100                           ; Damper wheel rate stiffness in N sec/m in slow speed rebound                    
DAMP_FAST_REBOUND=2780                      ; Damper wheel rate stiffness in N sec/m in fast speed rebound
DAMP_FAST_REBOUNDTHRESHOLD=0.100            ; Damper rebound slow/fast threshold in seconds


[REAR]
TYPE=ML
RIM_OFFSET=0.00
BASEY=-0.20 ; TODO Rough guess, but I'm not sure I can measure it
TRACK=1.480 ; TODO measure this
ROD_LENGTH=0.08 ; TODO I thought I understood this but I still don't
HUB_MASS=31 ; TODO measure this if possible

;Front lateral arm
JOINT1_CAR=0.456,-0.07,0.1
JOINT1_TYRE=0.03,-0.07,0.085

;Rear lateral arm
; JOINT4 moves left and right for toe adjustment, so it has to be one of the lateral arms
JOINT4_CAR=0.456,-0.07,-0.1
JOINT4_TYRE=0.03,-0.07,-0.085

;Trailing arm
JOINT2_CAR=0.1,-0.12,0.585
JOINT2_TYRE=0.1,-0.12,0

; The following two "links" are to constrain the top of the upright as though it's connected to a strut that moves more-or-less in a straight line (as on the real car); that's why they're super long.
;Strut X constraint
JOINT3_CAR=3,0,0
JOINT3_TYRE=0.1,0.15,0

;Strut Z constraint
JOINT0_CAR=0.1,0.3,3
JOINT0_TYRE=0.1,0.15,0

TOE_OUT=0.010                               ; Toe-out expressed as the length of the steering arm in meters        ;Final
STATIC_CAMBER=-0.1                          ; Static Camber in degrees. Actual camber relative to suspension geometry and movement, check values in game    ;Adjust to this value
; TODO this is more-or-less a total guess to jive with the front stiffness, based on MR = 0.9 and spring rate of 90lbs/in
; TODO AFAICT these numbers are about right but it feels way too stiff.
SPRING_RATE=20000
PROGRESSIVE_SPRING_RATE=0                   ; progressive spring rate in N/m/m
; TODO everything below this line has not been set properly
BUMP_STOP_RATE=40000                        ; bump stop spring rate
BUMPSTOP_UP=0.075                            ; meters to upper bumpstop from the 0 design of the suspension                
BUMPSTOP_DN=0.093                            ; meters to bottom bumpstop from the 0 design of the suspension
PACKER_RANGE=0.175                            ; Total suspension movement range, before hitting packers            
DAMP_BUMP=1320                                ; Damper wheel rate stiffness in N sec/m in slow speed compression
DAMP_FAST_BUMP=980                            ; Damper wheel rate stiffness in N sec/m in fast speed compression
DAMP_FAST_BUMPTHRESHOLD=0.080                ; Damper bump slow/fast threshold in seconds                    
DAMP_REBOUND=5100                            ; Damper wheel rate stiffness in N sec/m in slow speed rebound                    
DAMP_FAST_REBOUND=2780                        ; Damper wheel rate stiffness in N sec/m in fast speed rebound
DAMP_FAST_REBOUNDTHRESHOLD=0.100


[GRAPHICS_OFFSETS]
WHEEL_LF=-0.0                                ; Left front graphical offset of the wheel positioning in the x axis (width). + is left - is right movement
SUSP_LF=-0.0                                ; Left front graphical offset of the suspension positioning in the x axis (width). + is left - is right movement
WHEEL_RF=0.0                                ; Right front as above
SUSP_RF=0.0                                    ; Right front as above
WHEEL_LR=-0.0                                ; Left rear as above
SUSP_LR=-0.0                                ; Left rear as above
WHEEL_RR=0.0                                ; Right rear as above
SUSP_RR=0.0                                    ; Right rear as above

[DAMAGE]
MIN_VELOCITY=30                                ; MINUMUM VELOCITY TO START TAKING DAMAGE
GAIN=0.0006                                    ; AMOUNT OF STEER ROD DEFLECTION FOR IMPACT KMH
MAX_DAMAGE=0.05                                ; MAXIMUM AMOUNT OF STEER ROD DEFLECTION ALLOWED
DEBUG_LOG=1                                    ; ACTIVATES DAMAGE DEBUG IN THE LOG
